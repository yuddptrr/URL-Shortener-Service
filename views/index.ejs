<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>URL Shortener</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">
    <h1>ğŸ”— URL Shortener</h1>

    <!-- Create new URL form -->
    <form action="/shorten" method="POST" class="shorten-form">
      <input type="url" name="longUrl" placeholder="Enter long URL" required />
      <input type="datetime-local" name="expiresAt" />
      <button type="submit">Shorten</button>
    </form>

    <hr />

    <!-- Display all short URLs -->
    <h2>ğŸ“ Your URLs</h2>
    <ul>
      <% urls.forEach(url => { %>
        <li>
          <p>
            <strong><a href="<%= url.shortUrl %>" target="_blank"><%= url.shortUrl %></a></strong><br/>
            â†’ <%= url.longUrl %><br/>
            <% if (url.expiresAt) { %>
              â³ Expires: <%= new Date(url.expiresAt).toLocaleString() %><br/>
            <% } else { %>
              â™¾ï¸ No expiration<br/>
            <% } %>
          </p>

          <!-- Update/Delete form -->
          <form class="crud-form" data-code="<%= url.shortCode %>">
            <input type="url" name="longUrl" placeholder="New long URL" />
            <input type="datetime-local" name="expiresAt" />
            <button type="submit">Update</button>
            <button type="button" class="delete-btn">Delete</button>
          </form>

          <hr/>
        </li>
      <% }) %>
    </ul>
  </div>

  <script src="/crud.js"></script>
</body>
</html>
